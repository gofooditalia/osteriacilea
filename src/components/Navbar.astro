---
import { Menu, X } from "lucide-astro";
---

<header
    id="navbar"
    class="fixed top-0 left-0 w-full z-50 px-6 lg:px-10 py-4 transition-all duration-500 bg-transparent border-b border-white/0"
>
    <div class="max-w-[1200px] mx-auto flex items-center justify-between">
        <div class="flex items-center gap-8">
            <a href="/" class="flex items-center gap-3 text-primary group">
                <div class="size-14 transition-transform group-hover:scale-105">
                    <img
                        src="/icon.svg"
                        alt="Osteria Cilea Logo"
                        class="w-full h-full object-contain"
                    />
                </div>
            </a>
            <nav class="hidden lg:flex items-center gap-8">
                <a
                    href="/"
                    class="text-white text-sm font-bold hover:text-primary transition-colors"
                    >Home</a
                >

                <a
                    href="/#osteria"
                    class="text-white text-sm font-bold hover:text-primary transition-colors"
                    >La Nostra Storia</a
                >
                <a
                    href="/#gallery"
                    class="text-white text-sm font-bold hover:text-primary transition-colors"
                    >Gallery</a
                >
                <a
                    href="/#prenota"
                    class="text-white text-sm font-bold border border-white/20 hover:border-primary px-4 py-2 rounded-lg hover:text-primary transition-all"
                    >Prenota</a
                >
            </nav>
        </div>
        <div class="flex items-center gap-4">
            <a
                href="/menu"
                class="hidden md:flex min-w-[140px] cursor-pointer items-center justify-center rounded-lg h-11 px-6 bg-primary text-white text-sm font-black tracking-widest uppercase hover:opacity-90 transition-all shadow-lg shadow-primary/20 active:scale-95"
            >
                Vedi menu
            </a>
            <button
                id="mobile-menu-button"
                class="lg:hidden p-2 text-white hover:text-primary transition-colors"
                aria-label="Apri menu"
            >
                <Menu size={32} />
            </button>
        </div>
    </div>
</header>

<!-- Mobile Menu Container -->
<div
    id="mobile-menu"
    class="fixed inset-0 z-[60] w-full h-full bg-bg-light dark:bg-bg-dark transform translate-x-full transition-transform duration-300 ease-in-out lg:hidden"
>
    <div class="flex flex-col h-full p-6">
        <div class="flex items-center justify-between mb-12">
            <div class="size-16">
                <img
                    src="/icon.svg"
                    alt="Osteria Cilea Logo"
                    class="w-full h-full object-contain"
                />
            </div>
            <button
                id="close-menu-button"
                class="p-2 text-neutral-text dark:text-white hover:text-primary transition-colors"
                aria-label="Chiudi menu"
            >
                <X size={32} />
            </button>
        </div>
        <nav class="flex flex-col gap-6">
            <a
                href="/"
                class="mobile-link text-2xl font-bold text-neutral-text dark:text-white hover:text-primary transition-colors"
                >Home</a
            >

            <a
                href="/#osteria"
                class="mobile-link text-2xl font-bold text-neutral-text dark:text-white hover:text-primary transition-colors"
                >La Nostra Storia</a
            >
            <a
                href="/#gallery"
                class="mobile-link text-2xl font-bold text-neutral-text dark:text-white hover:text-primary transition-colors"
                >Gallery</a
            >
            <a
                href="/#prenota"
                class="mobile-link text-2xl font-bold text-neutral-text dark:text-white border border-neutral-text/20 dark:border-white/20 px-6 py-3 rounded-xl hover:text-primary hover:border-primary transition-all text-center"
                >Prenota</a
            >
        </nav>
        <div class="mt-auto pt-10">
            <a
                href="/menu"
                class="mobile-link flex w-full cursor-pointer items-center justify-center rounded-lg h-14 bg-primary text-white text-lg font-black tracking-widest uppercase hover:opacity-90 transition-all shadow-lg shadow-primary/20"
            >
                Vedi menu
            </a>
        </div>
    </div>
</div>

<script>
    const navbar = document.getElementById("navbar");
    const mobileMenuButton = document.getElementById("mobile-menu-button");
    const closeMenuButton = document.getElementById("close-menu-button");
    const mobileMenu = document.getElementById("mobile-menu");
    const mobileLinks = document.querySelectorAll(".mobile-link");

    // Dynamic Navbar on Scroll
    window.addEventListener("scroll", () => {
        if (window.scrollY > 50) {
            navbar?.classList.add(
                "bg-bg-dark/95",
                "backdrop-blur-sm",
                "border-white/10",
                "py-3",
            );
            navbar?.classList.remove(
                "bg-transparent",
                "border-white/0",
                "py-4",
            );
        } else {
            navbar?.classList.remove(
                "bg-bg-dark/95",
                "backdrop-blur-sm",
                "border-white/10",
                "py-3",
            );
            navbar?.classList.add("bg-transparent", "border-white/0", "py-4");
        }
    });

    function toggleMenu() {
        mobileMenu?.classList.toggle("translate-x-full");
        document.body.classList.toggle("overflow-hidden");
    }

    mobileMenuButton?.addEventListener("click", toggleMenu);
    closeMenuButton?.addEventListener("click", toggleMenu);

    mobileLinks.forEach((link) => {
        link.addEventListener("click", () => {
            mobileMenu?.classList.add("translate-x-full");
            document.body.classList.remove("overflow-hidden");
        });
    });
</script>
